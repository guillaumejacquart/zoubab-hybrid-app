
<ion-view view-title="Chat">
	<ion-content id="chat-container">	
		
		<div id="messages" class="list" schroll-bottom="chat.messages">

			<div class="item" ng-repeat="m in chat.messages | limitTo:500 track by $index" ng-class="{'has-thumbnail':chat.showUserInfos(m)}">
			  <div style="background-image:url('{{chat.getPicture(m)}}')" class="img" ng-class="{'active':m.userId != chat.lastMessage.userId || message.showDetail}"></div>
			  <h2 ng-show="m.userId != chat.lastMessage.userId || message.showDetail">{{m.username}}<em>{{ m.date | date:'dd-MM-yyyy HH:mm:ss' }}</em></h2>
			  <p class="message" ng-class="{'has-thumbnail':m.userId != chat.lastMessage.userId || message.showDetail}" ng-click="message.showDetail = !message.showDetail">
				{{ m.msg }}
			  </p>
			</div>

		</div>
	</ion-content>
	
	<ion-footer-bar class="bar-royal">
	<form id="chat-form" ng-submit="chat.submit(chat.msg)" class="bar bar-footer bar-balanced">
		<label class="item-input-wrapper">
			<i class="icon ion-ios-search placeholder-icon"></i>
			<input type="text" ng-model="chat.msg" placeholder="Say a little prayer for Zoubab">
		</label>
		<button class="button button-clear">
			Send!
		</button>
	</form>
	</ion-footer-bar>
	
</ion-view>